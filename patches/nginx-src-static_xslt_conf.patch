--- nginx-1.18.0.orig/auto/lib/libxslt/conf
+++ nginx-1.18.0/auto/lib/libxslt/conf
@@ -13,7 +13,7 @@
                       #include <libxslt/transform.h>
                       #include <libxslt/xsltutils.h>"
     ngx_feature_path="/usr/include/libxml2"
-    ngx_feature_libs="-lxml2 -lxslt"
+    ngx_feature_libs="-lxml2 -lxslt -lz -llzma"
     ngx_feature_test="xmlParserCtxtPtr    ctxt = NULL;
                       xsltStylesheetPtr   sheet = NULL;
                       xmlDocPtr           doc = NULL;
@@ -30,9 +30,9 @@
     ngx_feature_path="/usr/local/include/libxml2 /usr/local/include"
 
     if [ $NGX_RPATH = YES ]; then
-        ngx_feature_libs="-R/usr/local/lib -L/usr/local/lib -lxml2 -lxslt"
+        ngx_feature_libs="-R/usr/local/lib -L/usr/local/lib -lxml2 -lxslt -lz -llzma"
     else
-        ngx_feature_libs="-L/usr/local/lib -lxml2 -lxslt"
+        ngx_feature_libs="-L/usr/local/lib -lxml2 -lxslt -lz -llzma"
     fi
 
     . auto/feature
@@ -47,9 +47,9 @@
     ngx_feature_path="/usr/pkg/include/libxml2 /usr/pkg/include"
 
     if [ $NGX_RPATH = YES ]; then
-        ngx_feature_libs="-R/usr/pkg/lib -L/usr/pkg/lib -lxml2 -lxslt"
+        ngx_feature_libs="-R/usr/pkg/lib -L/usr/pkg/lib -lxml2 -lxslt -lz -llzma"
     else
-        ngx_feature_libs="-L/usr/pkg/lib -lxml2 -lxslt"
+        ngx_feature_libs="-L/usr/pkg/lib -lxml2 -lxslt -lz -llzma"
     fi
 
     . auto/feature
@@ -64,9 +64,9 @@
     ngx_feature_path="/opt/local/include/libxml2 /opt/local/include"
 
     if [ $NGX_RPATH = YES ]; then
-        ngx_feature_libs="-R/opt/local/lib -L/opt/local/lib -lxml2 -lxslt"
+        ngx_feature_libs="-R/opt/local/lib -L/opt/local/lib -lxml2 -lxslt -lz -llzma"
     else
-        ngx_feature_libs="-L/opt/local/lib -lxml2 -lxslt"
+        ngx_feature_libs="-L/opt/local/lib -lxml2 -lxslt -lz -llzma"
     fi
 
     . auto/feature
